<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Main Menu - FIT Challenge Program 10 Hari</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

<style>
body { background-color: #f8f9fa; }
/***** Judul di Navbar *****/
.brand-title { font-size: 12px; font:wide; color: #023581; line-height: 1; }
/***** Sub Judul di Navbar *****/
.brand-subtitle { font-size: 10px; color: #6c757d; line-height: 1; }

/***** Main Menu Navbar *****/
.main-menu-link { font-weight: 500; padding: 8px 12px !important; border-radius: 6px; }
.main-menu-link:hover, .main-menu-link.active { 
  color: #dc3545 !important; 
  background-color: #dadada;
}

/****** Icon Medsos ******/
.social-icon { 
  display: inline-flex; 
  justify-content: center; 
  align-items: center; 
  width: 40px; 
  height: 40px; 
  border-radius: 50%; 
}
.social-icon i { color: #555; transition: color 0.3s ease-in-out; }
.social-icon:hover { background-color: #dadada; }
.social-icon:hover i { color: #dc3545; }

/***** Header Image *****/
.header-image img {
    height: 100%;
    width: 100%;
    object-fit: cover;
    /*
    border-radius: 10px 10px 0 0;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.5);
    */
}

/***** Menu Accordian ******/
.menu-accordion { margin-bottom: 10px; }
.menu-header {
  /* background: linear-gradient(135deg, #002266 0%, #0044cc 100%); */
  background: linear-gradient(135deg, #105fff 0%, #cfdaff 100%);
  color: white;
  border: none;
  padding: 15px 20px;
  text-align: left;
  width: 100%;
  /* border-radius: 8px; */
  font-weight: 500;
  display: flex;
  justify-content: space-between;
  align-items: center;
  transition: all 0.3s ease;
}
.menu-header:hover {
  /* background: linear-gradient(135deg, #0044cc 0%, #002266 100%); */
  background: linear-gradient(135deg, #cfdaff 0%, #105fff 100%);
  transform: translateY(-2px);
  box-shadow: 0 4px 8px rgba(0,0,0,0.2);
}
.menu-header .menu-icon { transition: transform 0.3s ease; }
.menu-header.collapsed .menu-icon { transform: rotate(0deg); }
.menu-header:not(.collapsed) .menu-icon { transform: rotate(180deg); }
.menu-content {
  background-color: white;
  /* border: 1px solid #dee2e6; */
  border-top: none;
  /* border-radius: 0 0 8px 8px; */
  padding: 0;
}
.menu-item {
  display: block;
  padding: 12px 20px;
  color: #333;      
  text-decoration: none;
  border-bottom: 1px solid #f8f9fa;
  transition: all 0.2s ease;
}
.menu-item:last-child { border-bottom: none; }
/* Warna Hover Item Text Menu */
.menu-item:hover {
  /* Warna Pointer Sub Menu */
  background-color: #e7e7e7;
  /* color: #002266; */
  color: #830000;        
  text-decoration: none;
}
/* Warna Icon Menu */
.menu-item i { width: 20px; margin-right: 10px; color: #000000; }
/* Status Icon Lock */
.status-lock { color: #002fff; margin-left: 10px; }
/* Status Icon Unlock */
.status-unlock { color: #ffffff; margin-left: 10px; }
/***** Akhir Menu Accordian *****/

/***** Footer *****/
.footer a:hover { color: #ff4d4d !important; }

/**** * About Overlay *****/
.about-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0, 0, 0, 0.5);
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 1000;
  display: none;
}
.about-form {
  width: 100%;
  max-width: 350px;
  padding: 20px;
  background-color: white;
  border-radius: 8px;
  box-shadow: 0 8px 16px rgba(0, 0, 0, 0.3);
  text-align: center;
}
/***** Akhir About *****/

/***** Video Player Styles *****/
.video-container {
    position: relative;
    width: 100%;
    /* max-width: 800px; */
    max-width: 780px;
    margin: 15px auto;
    display: none;
    background: #000;
    border-radius: 12px;
    overflow: hidden;
    box-shadow: 0 8px 25px rgba(0,0,0,0.3);
    /* border: 3px solid #002266; */
    border: 3px solid #000000;
}
.video-wrapper {
    position: relative;
    width: 100%;
    padding-bottom: 56.25%; /* 16:9 Aspect Ratio */
    height: 0;
}
.video-wrapper iframe,
.video-wrapper video { position: absolute; top: 0; left: 0; width: 100%; height: 100%; border: none; }
.video-placeholder {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(135deg, #002266 0%, #0044cc 100%);
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    color: white;
    cursor: pointer;
    transition: all 0.3s ease;
}
.video-placeholder:hover {
    background: linear-gradient(135deg, #0044cc 0%, #002266 100%);
    transform: scale(1.02);
}
.video-placeholder i { font-size: 48px; margin-bottom: 15px; opacity: 0.9; }
.video-placeholder-text { font-size: 16px; font-weight: 500; text-align: center; padding: 0 20px; }
/* Spinner di tengah video player */
.video-loading {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    display: none;
    justify-content: center;
    align-items: center;
    background: #000;
    z-index: 5;
}
.video-loading .spinner-border { width: 3rem; height: 3rem; color: #dc3545; }
.close-video {
    position: absolute;
    top: 10px;
    right: 10px;
    background: rgba(0,0,0,0.7);
    color: white;
    border: none;
    border-radius: 50%;
    width: 35px;
    height: 35px;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    z-index: 20;
    transition: all 0.3s ease;
    font-size: 14px;
}
.close-video:hover { background: rgba(220, 53, 69, 0.9); transform: scale(1.1); }
/***** Akhir Video Player Styles *****/

/***** Playlist Video Youtube *****/
.playlist-container {
    display: none;
    background: white;
    border: 1px solid #dee2e6;
    border-top: none;
    max-height: 500px;
    overflow-y: auto;
    scrollbar-width: thin;
}
.playlist-container::-webkit-scrollbar { width: 6px; }
.playlist-container::-webkit-scrollbar-track { background: #f8f9fa; }
.playlist-container::-webkit-scrollbar-thumb { background: #ccc; border-radius: 3px; }
.playlist-item {
    display: flex;
    align-items: center;
    padding: 12px 15px;
    border-bottom: 1px solid #f8f9fa;
    transition: all 0.2s ease;
}
.playlist-item:hover { background-color: #f8f9fa;}
.playlist-item:last-child { border-bottom: none; }
.playlist-thumbnail {
    position: relative;
    width: 120px;
    height: 68px;
    margin-right: 12px;
    border-radius: 4px;
    overflow: hidden;
    background: #ddd;
    flex-shrink: 0;
}
.playlist-thumbnail img { width: 100%; height: 100%; object-fit: cover; }
.position-badge {
    position: absolute;
    bottom: 4px;
    right: 4px;
    background: rgba(0, 0, 0, 0.8);
    color: white;
    font-size: 10px;
    padding: 2px 6px;
    border-radius: 3px;
    font-weight: bold;
    min-width: 20px;
    text-align: center;
}
.playlist-info { flex: 1; min-width: 0; }
.playlist-title {
    font-weight: 500;
    margin-bottom: 4px;
    font-size: 14px;
    line-height: 1.3;
    display: -webkit-box;
    /* -webkit-line-clamp: 2; */
    line-clamp: 2;
    /*-webkit-box-orient: vertical;*/
    box-orient: vertical;
    overflow: hidden;
}
.playlist-meta {display: flex; gap: 12px; font-size: 12px; color: #666;}
.playlist-duration {color: #dc3545; font-weight: 500;}
.playlist-position {color: #6c757d; }
.playlist-loading {padding: 30px 20px; text-align: center; color: #666;}
.playlist-error { padding: 30px 20px; text-align: center; color: #dc3545;}
/***** Akhir Playlist Youtube *****/

/***** PDF Viewer Styles *****/
.pdf-viewer {
    display: none;
    position: relative;
    background: white;
    border: 1px solid #dee2e6;
    border-top: none;
    max-height: 600px;
    overflow: hidden;
    scrollbar-width: none;
}
.pdf-viewer::-webkit-scrollbar { width: 0px; display: none;}
.pdf-container { width: 100%; height: 100%; min-height: 500px; overflow-y: auto; scrollbar-width: thin;}
.pdf-container::-webkit-scrollbar { width: 6px; }
.pdf-container::-webkit-scrollbar-track { background: #f8f9fa; }
.pdf-container::-webkit-scrollbar-thumb { background: #ccc; border-radius: 3px; }
.pdf-header {
    padding: 12px 15px;
    background: #f8f9fa;
    border-bottom: 1px solid #dee2e6;
    display: flex;
    justify-content: between;
    align-items: center;
}
.pdf-title { font-weight: 600; color: #333; flex: 1; }
.pdf-actions { display: flex; gap: 10px; }
.pdf-loading {
    padding: 30px 20px;
    text-align: center;
    color: #666;
    height: 200px;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
}
.pdf-error {
    padding: 30px 20px;
    text-align: center;
    color: #dc3545;
    height: 200px;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
}
.pdf-mobile-warning {
    padding: 15px;
    background: #fff3cd;
    border: 1px solid #ffeaa7;
    border-radius: 4px;
    margin: 10px;
    text-align: center;
    font-size: 14px;
}
.close-pdf {
    position: absolute;
    top: 10px;
    right: 10px;
    background: rgba(0,0,0,0.7);
    color: white;
    border: none;
    border-radius: 50%;
    width: 35px;
    height: 35px;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    z-index: 25;
    transition: all 0.3s ease;
    font-size: 14px;
}
.close-pdf:hover { background: rgba(220, 53, 69, 0.9); transform: scale(1.1);}
/***** Akhir PDF Viewer Styles *****/

/***** PDF.js Viewer Styles *****/
.pdfjs-viewer { width: 100%; height: 500px; border: 1px solid #ddd; overflow: auto; background: #f5f5f5;}
.pdfjs-canvas { display: block; margin: 0 auto; box-shadow: 0 2px 10px rgba(0,0,0,0.1);}
.pdfjs-controls {
    padding: 10px;
    background: white;
    border-bottom: 1px solid #ddd;
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 10px;
    flex-wrap: wrap;
}
.pdfjs-page-info { font-size: 14px; color: #666;}
/***** Akhir PDF.js Viewer Styles *****/

/***** Tampilan Mobile ******/
@media (max-width: 591.98px) {
  .navbar-collapse .mx-auto {
      margin-left: 0 !important;
      margin-right: 0 !important;
      flex-direction: row; 
      margin-bottom: 1rem;
  }
  .navbar-nav:not(.mx-auto) .nav-item, .navbar-nav:not(.mx-auto) .main-menu-link { 
    /*width: 100%; */
    width: 50%; 
     
  }
}
/***** Akhir Tampilan Mobile *****/

</style>
</head>

<body>
<div class="container mt-5 mb-5">
  <div class="row justify-content-center">
    <div class="card mx-auto shadow p-0" style="max-width:789px">
      <!-- HEADER -->
      <header>
        <nav class="navbar navbar-expand-lg navbar-light" style="background-color: #f1f1f1;">
          <div class="container-fluid">
            <a class="navbar-brand d-flex align-items-center" href="#">
              <img src="images/logo-beratidealku.png" alt="Logo" width="199" height="38" class="me-2">
              <div class="d-md-block">
                <div class="brand-title">FIT Challenge</div>
                <div class="brand-subtitle">Program 10 Hari</div>
              </div>
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#mainNavbar">
              <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="mainNavbar">
              <ul class="navbar-nav mx-auto">
                <li class="nav-item"><a class="nav-link social-icon" href="https://facebook.com/beratidealku" target="_blank"><i class="fab fa-facebook-f"></i></a></li>
                <li class="nav-item"><a class="nav-link social-icon" href="https://www.instagram.com/hestyamin" target="_blank"><i class="fab fa-instagram"></i></a></li>
                <li class="nav-item"><a class="nav-link social-icon" href="https://www.youtube.com" target="_blank"><i class="fab fa-youtube"></i></a></li>
              </ul>
              <ul class="navbar-nav">
                <li class="nav-item"><a class="nav-link main-menu-link" href="#about" onclick="showAbout()">About</a></li>
                <li class="nav-item" id="loginMenuItem">
                  <a class="nav-link main-menu-link" href="loginFC.html">
                    <i class="fas fa-sign-in-alt"></i> Login
                  </a>
                </li>
              </ul>
            </div>
          </div>
        </nav>
      </header>
      
      <div class="card-body">
       <!-- Header Image -->
        <div class="header-image">
            <img src="images/Header-FITChallenge.jpg" alt="Header Image">
        </div>
        <div class="card-title text-white p-1 mb-0" style="text-shadow: #c6d8ff; text-align:center; background-color: #002266; border-bottom-style:solid; border-bottom-color:#830000; border-width:5px;">
          <h5>SELAMAT DATANG</h5>
          <h6 style="font-size: small;">Di kelas online <strong>FIT CHALLENGE PROGRAMME by BERATidealku</strong> merupakan tantangan</br>
          bagi anda yang ingin meningkatkan level kebugaran. Dengan mengikuti kelas ini selama <strong>10 Hari</strong></br>
          anda akan di bimbing secara terstruktur dengan kurikulum yang disusun sedemikian rupa </br>
          dengan panduan video tutorial yang lengkap serta didampingi seorang coach berpengalaman</h6>
        </div>
        
        <!-- MENU UTAMA FIT CHALLENGE  -->
        <div class="menu-accordion" id="menuAccordion">
          <!-- MENU PANDUAN APLIKASI -->
          <div class="menu-accordion-item">
            <button class="menu-header collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#panduanContent">
              <span>
                <i class="fas fa-angle-double-right me-2"></i>Panduan Penggunaan Aplikasi
                <i class="fas fa-lock status-lock"></i>
              </span>
              <i class="fas fa-angle-down menu-icon"></i>
            </button>

            <!-- Sub Menu Panduan Aplikasi -->
            <div class="collapse" id="panduanContent" data-bs-parent="#menuAccordion">
              <div class="menu-content">
                <a href="https://www.youtube.com/watch?v=Zg_badTE2Ec" 
                  class="menu-item" onclick="return false;">
                  <i class="fas fa-file-video"></i>Tutorial Panduan Penggunaan Aplikasi
                </a>
                <a href="pdf/Panduan_Meal_Plan.pdf" 
                  class="menu-item" onclick="return false;">
                  <i class="fas fa-file-pdf"></i>Panduan Meal Plan
                </a>
               
  
                <a href="pdf/Panduan_Workout.pdf"  
                  class="menu-item" onclick="return false;">
                  <i class="fas fa-file-pdf"></i>Panduan Workout
                </a>
                <a href="pdf/Panduan_Water_Reminder.pdf" 
                  class="menu-item" onclick="return false;">
                  <i class="fas fa-file-pdf"></i>Panduan Water Reminder
                </a>
                <a href="pdf/Panduan_Waktu_Istirahat.pdf" 
                  class="menu-item" onclick="return false;">
                  <i class="fas fa-file-pdf"></i>Panduan Waktu Istirahat
                </a>
                <a href="pdf/Panduan_Progress_Tracking.pdf" 
                  class="menu-item" onclick="return false;">
                  <i class="fas fa-file-pdf"></i>Panduan Progress Tracking
                </a>
                
                <!-- PDF Viewer untuk Panduan Aplikasi -->
                <div class="pdf-viewer" id="pdfViewerPanduan">
                  <button class="close-pdf" onclick="closePDF('panduan')">
                    <i class="fas fa-times"></i>
                  </button>
                  <div class="pdf-container" id="pdfContainerPanduan">
                    <!-- PDF akan dimuat di sini -->
                  </div>
                </div>
                
                <!-- Video Player untuk Panduan Aplikasi -->
                <div class="video-container" id="videoContainerPanduan">
                  <button class="close-video" onclick="closeVideo('panduan')">
                    <i class="fas fa-times"></i>
                  </button>
                  <div class="video-wrapper">
                    <div class="video-placeholder" onclick="playVideo('panduan')">
                      <i class="fas fa-play-circle"></i>
                      <div class="video-placeholder-text">Klik untuk memuat video</div>
                    </div>
                    <div class="video-loading" id="videoLoadingPanduan">
                      <div class="spinner-border" role="status">
                        <span class="visually-hidden">Loading video...</span>
                      </div>
                    </div>
                    <div id="videoPlayerPanduan"></div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- MENU PERKENALAN -->
          <div class="menu-accordion-item">
            <button class="menu-header collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#perkenalanContent">
              <span>
                <i class="fas fa-angle-double-right me-2"></i>Perkenalan
                <i class="fas fa-lock status-lock"></i>
              </span>
              <i class="fas fa-angle-down menu-icon"></i>
            </button>

            <!-- Sub Menu Perkenalan --> 
            <div class="collapse" id="perkenalanContent" data-bs-parent="#menuAccordion">
              <div class="menu-content">
                <!-- Tampilkan Video Link Canva -->
                <a href="https://www.canva.com/design/DAGqjXWcl6o/ylVUgMbZ8it0TXN0dqCKzQ/view?utm_content=DAGqjXWcl6o&utm_campaign=designshare&utm_medium=link2&utm_source=uniquelinks&utlId=h1feb0aca2a" 
                  class="menu-item" onclick="return false;">
                  <i class="fas fa-video"></i>1. Perkenalan dengan Personal Diet Partner
                </a>
                <!-- Tampilkan Video Link Youtube -->
                <a href="https://www.youtube.com/watch?v=9DoHhx9jlGM" 
                  class="menu-item" onclick="return false;">
                  <i class="fas fa-video"></i>2. Alasan Mengapa Herbalife
                </a>
                <!-- Tampilkan Video Link Folder  -->
                <a href="video/Live Best Your Best Life ! - 360.mp4" 
                  class="menu-item" onclick="return false;">
                  <i class="fas fa-video"></i>3. Live Best Your Best Life !
                </a>
                      
                <!-- Video Player untuk Perkenalan -->
                <div class="video-container" id="videoContainerPerkenalan">
                  <button class="close-video" onclick="closeVideo('perkenalan')">
                    <i class="fas fa-times"></i>
                  </button>
                  <div class="video-wrapper">
                    <div class="video-placeholder" onclick="playVideo('perkenalan')">
                      <i class="fas fa-play-circle"></i>
                      <div class="video-placeholder-text">Klik untuk memuat video</div>
                    </div>
                    <div class="video-loading" id="videoLoadingPerkenalan">
                      <div class="spinner-border" role="status">
                        <span class="visually-hidden">Loading video...</span>
                      </div>
                    </div>
                    <div id="videoPlayerPerkenalan"></div>
                </div>
              </div>
            </div>
          </div>

          <!-- MENU MODUL HARI PERTAMA -->
          <div class="menu-accordion-item">
            <button class="menu-header collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#pertemuan1Content">
              <span>
                <i class="fas fa-angle-double-right me-2"></i>Modul Hari Pertama
                <i class="fas fa-lock status-lock"></i>
              </span>
              <i class="fas fa-angle-down menu-icon"></i>
            </button>

            <!-- SUBMENU MODUL HARI PERTAMA --> 
            <div class="collapse" id="pertemuan1Content" data-bs-parent="#menuAccordion">
              <div class="menu-content">
                <!-- VIDEO MATERI HARI PERTAMA -->
                <a href="https://www.youtube.com/watch?v=Zg_badTE2Ec" 
                  class="menu-item" onclick="return false;">
                  <i class="fas fa-video"></i>1.1 Materi Hari Pertama - Dari Mana Saja Sumber Protein Bisa Didapatkan?
                </a>
                <!-- MEAL PLAN HARI PERTAMA -->
                <a href="#" 
                  class="menu-item" onclick="return false;">
                  <i class="fas fa-utensils"></i>1.2 Meal Plan - Hari Pertama
                </a> 
                <div class="card-title p-1 mb-0" style="background-color: #6b6b6b; border-bottom-style:solid; border-bottom-color:#facc00; border-width:5px;">
                  <div class="btn-close" data-bs-dismiss="card-title" style="text-align:center; color: #ffffff; text-shadow:#bebebe;"> Apa yang anda makan hari ini ?
                    <button type="button" style="align-items:end ;color:#ff0000;"></button>
                  </div>
                </div> 
                <div class="border p-3 bg-light mt-0 mb-2">
                  <h6>REKOMENDASI</h6>
                  <div>
                    <label>Meal Plan yang disarankan</label>
                    <button type="button" class="btn btn-primary btn-sm"><i class="fas fa-utensils"></i> Lihat</button>
                  </div> 

                  <h6 class="mt-2">JADWAL MEAL PLAN</h6>
                  <div>
                    <div><label class="form-label">Sarapan (07:00 - 09:00)</label></div>
                    <div>
                      <input type="text" id="mSarapan" placeholder="Upload Sarapan" readonly>
                        <button type="button" class="btn btn-primary btn-sm" data-bs-toggle="tooltip" title="upload"><i class="fa fa-cloud-upload"></i></button>
                        <button type="button" class="btn btn-outline-primary btn-sm" data-bs-toggle="tooltip" title="update"><i class="fa fa-pencil-square-o"></i></button>
                      </input>
                    </div>

                    <div><label class="form-label">Cemilan Pagi (10:00 - 10:30)</label></div>
                    <div>
                      <input type="text" id="mCemilanPagi" placeholder="Upload Cemilan Pagi" readonly>
                      <button type="button" class="btn btn-primary btn-sm" data-bs-toggle="tooltip" title="upload"><i class="fa fa-cloud-upload"></i></button>
                      <button type="button" class="btn btn-outline-primary btn-sm" data-bs-toggle="tooltip" title="update"><i class="fa fa-pencil-square-o"></i></button>
                      </input>
                    </div>

                    <div><label class="form-label">Makan Siang (12:00 - 14:00)</label></div>
                    <div>
                      <input type="text" id="mMakanSiang" placeholder="Upload Makan Siang" readonly>
                      <button type="button" class="btn btn-primary btn-sm" data-bs-toggle="tooltip" title="upload"><i class="fa fa-cloud-upload"></i></button>
                      <button type="button" class="btn btn-outline-primary btn-sm" data-bs-toggle="tooltip" title="update"><i class="fa fa-pencil-square-o"></i></button>
                      </input>
                    </div>

                    <div><label class="form-label">Cemilan Sore (16:00 - 16:30)</label></div>
                    <div>
                      <input type="text" id="mCemilanSore" placeholder="Upload Cemilan Sore" readonly>
                      <button type="button" class="btn btn-primary btn-sm" data-bs-toggle="tooltip" title="upload"><i class="fa fa-cloud-upload"></i></button>
                      <button type="button" class="btn btn-outline-primary btn-sm" data-bs-toggle="tooltip" title="update"><i class="fa fa-pencil-square-o"></i></button>
                      </input>
                    </div>

                    <div><label class="form-label">Makan Malam (18:00 - 20:00)</label></div>
                    <div>
                      <input type="text" id="mMakanMalam" placeholder="Upload Makan Malam" readonly>
                      <button type="button" class="btn btn-primary btn-sm" data-bs-toggle="tooltip" title="upload"><i class="fa fa-cloud-upload"></i></button>
                      <button type="button" class="btn btn-outline-primary btn-sm" data-bs-toggle="tooltip" title="update"><i class="fa fa-pencil-square-o"></i></button>
                      </input>
                    </div>
                  </div>
                </div>

                <!-- WORKOUT HARI PERTAMA -->
                <a href="#" 
                  class="menu-item" onclick="return false;">
                  <i class="fas fa-dumbbell"></i>1.3 Workout - Hari Pertama
                </a>
                <div class="card-title p-1 mb-0" style="text-align:center; color: #ffffff; text-shadow: #bebebe; background-color: #5f5f5f; border-bottom-style:solid; border-bottom-color:#facc00; border-width:5px;">
                  <h6><i class="fas fa-dumbbell"></i> OLAHRAGA HARI PERTAMA</h6>
                </div> 
                <div class="border p-3 bg-light mt-0 mb-2">
                  <h7>REKOMENDASI</h7>
                  <div>
                    <label>Olahraga yang disarankan</label>
                    <button type="button" class="btn btn-primary btn-sm"><i class="fas fa-utensils"></i> Lihat</button>
                  </div> 
                </div>

                <!-- WATER REMINDER HARI PERTAMA -->
                <a href="#" 
                  class="menu-item" onclick="return false;">
                  <i class="fas fa-beer"></i>1.4 Water Reminder - Hari Pertama
                </a>
                <div class="card-title p-1 mb-0" style="text-align:center; color: #ffffff; text-shadow: #bebebe; background-color: #5f5f5f; border-bottom-style:solid; border-bottom-color:#facc00; border-width:5px;">
                  <h6><i class="fas fa-beer"></i> HARI INI MINUM AIR PUTIH BERAPA ?</h6>
                </div> 
                <div class="border p-3 bg-light mt-0 mb-2">
                  <div class="input-group mb-3">
                    <div class="input-group-text">
                      <input type="radio">
                    </div>
                    <input type="text" class="form-control" placeholder="Kurang dari 1 ltr air putih" readonly>
                  </div>  
                  <div class="input-group mb-3">
                    <div class="input-group-text">
                      <input type="radio">
                    </div>
                    <input type="text" class="form-control" placeholder="1 ltr air putih" readonly>
                  </div>  
                  <div class="input-group mb-3">
                    <div class="input-group-text">
                      <input type="radio">
                    </div>
                    <input type="text" class="form-control" placeholder="2 ltr air putih" readonly>
                  </div>  
                  <div class="input-group mb-3">
                    <div class="input-group-text">
                      <input type="radio"> 
                    </div>
                    <input type="text" class="form-control" placeholder="Lebih dari 2 ltr air putih" readonly>
                  </div>
                </div>

                <a href="#" 
                  class="menu-item" onclick="return false;">
                  <i class="fas fa-bed"></i>1.5 Waktu Istirahat - Hari Pertama
                </a>
                <a href="#" 
                  class="menu-item" onclick="return false;">
                  <i class="fas fa-weight"></i>1.6 Data Tracking - Hari Pertama
                </a>
                <a href="https://api.whatsapp.com/send?phone=6281241318600&text=Halo+kak%2C+saya+ingin+bertanya+materi+tentang+" 
                  class="menu-item" onclick="return false;">
                  <i class="fa fa-whatsapp"></i>1.7 Tanya Coach? - Hari Pertama
                </a>
                <a href="#" 
                  class="menu-item" onclick="return false;">
                  <i class="fas fa-check-square"></i> SELESAI MODUL PERTAMA
                </a>
            
                <!-- PDF Viewer untuk Modul hari Pertama -->
                <div class="pdf-viewer" id="pdfViewerMealPlan">
                  <button class="close-pdf" onclick="closePDF('mealPlan')">
                    <i class="fas fa-times"></i>
                  </button>
                  <div class="pdf-container" id="pdfContainerMealPlan">
                    <!-- PDF akan dimuat di sini -->
                  </div>
                </div>

                <!-- Video Player untuk Modul Hari Pertama -->
                <div class="video-container" id="videoContainerPertemuan1">
                  <button class="close-video" onclick="closeVideo('pertemuan1')">
                    <i class="fas fa-times"></i>
                  </button>
                  <div class="video-wrapper">
                    <div class="video-placeholder" onclick="playVideo('pertemuan1')">
                      <i class="fas fa-play-circle"></i>
                      <div class="video-placeholder-text">Klik untuk memuat video</div>
                    </div>
                    <div class="video-loading" id="videoLoadingPertemuan1">
                      <div class="spinner-border" role="status">
                        <span class="visually-hidden">Loading video...</span>
                      </div>
                    </div>
                    <div id="videoPlayerPertemuan1"></div>
                </div>
              </div>
            </div>
          </div>

          <!-- Pertemuan 2 -->
          <div class="menu-accordion-item">
            <button class="menu-header collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#pertemuan2Content">
              <span>
                <i class="fas fa-angle-double-right me-2"></i>Modul Hari Kedua
                <i class="fas fa-lock status-lock"></i>
              </span>
              <i class="fas fa-angle-down menu-icon"></i>
            </button>

            <div class="collapse" id="pertemuan2Content" data-bs-parent="#menuAccordion">
              <div class="menu-content">
                <a href="https://www.youtube.com/watch?v=Zg_badTE2Ec" 
                  class="menu-item" onclick="return false;">
                  <i class="fas fa-video"></i>2.1 Materi Hari Kedua - Dari Mana Saja Sumber Karbohidrat Bisa Didapatkan?
                </a>
                <a href="#" 
                  class="menu-item" onclick="return false;">
                  <i class="fas fa-utensils"></i>2.2 Meal Plan - Hari Kedua
                </a>
                <a href="#" 
                  class="menu-item" onclick="return false;">
                  <i class="fas fa-dumbbell"></i>2.3 Workout - Hari Kedua
                </a>
                <a href="#" 
                  class="menu-item" onclick="return false;">
                  <i class="fas fa-wine-glass-alt"></i>2.4 Water Reminder - Hari Kedua
                </a>
                <a href="#" 
                  class="menu-item" onclick="return false;">
                  <i class="fas fa-bed"></i>2.5 Waktu Istirahat - Hari Kedua
                </a>
                <a href="#" 
                  class="menu-item" onclick="return false;">
                  <i class="fas fa-weight"></i>2.6 Data Tracking - Hari Kedua
                </a>
                <a href="https://api.whatsapp.com/send?phone=6281241318600&text=Halo+kak%2C+saya+ingin+bertanya+materi+tentang+" 
                  class="menu-item" onclick="return false;">
                  <i class="fa fa-whatsapp"></i>2.7 Tanya Coach? - Hari Kedua
                </a>
                <a href="#" 
                  class="menu-item" onclick="return false;">
                  <i class="fas fa-check-square"></i> SELESAI MODUL KEDUA
                </a>
                
                <!-- Video Player untuk Pertemuan Pertama -->
                <div class="video-container" id="videoContainerPertemuan2">
                  <button class="close-video" onclick="closeVideo('pertemuan2')">
                    <i class="fas fa-times"></i>
                  </button>
                  <div class="video-wrapper">
                    <div class="video-placeholder" onclick="playVideo('pertemuan2')">
                      <i class="fas fa-play-circle"></i>
                      <div class="video-placeholder-text">Klik untuk memuat video</div>
                    </div>
                    <div class="video-loading" id="videoLoadingPertemuan1">
                      <div class="spinner-border" role="status">
                        <span class="visually-hidden">Loading video...</span>
                      </div>
                    </div>
                    <div id="videoPlayerPertemuan2"></div>
                </div>
              </div>
            </div>
          </div>

          <!-- Pertemuan 3-10 (sama struktur) -->
          
          <!-- Tambahkan pertemuan 4-10 dengan struktur yang sama -->
    
          <!-- TAMPILAN KREASI RESEP -->
          <div class="menu-accordion-item">
            <button class="menu-header collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#healthyRecept">
              <span>
                <i class="fas fa-angle-double-right me-2"></i>Resep Healthy Snacking
                <i class="fas fa-lock status-lock"></i>
              </span>
              <i class="fas fa-angle-down menu-icon"></i>
            </button>
            <div class="collapse" id="healthyRecept" data-bs-parent="#menuAccordion">
              <div class="menu-content">
                <a href="https://www.youtube.com/playlist?list=PLJU0P2EGDp-8Zs3cF6x84nF1wkB66hYvG" 
                  class="menu-item" onclick="return false;">
                  <i class="fas fa-play-circle"></i>Playlist Kreasi Resep Sehat
                </a>
                
                <!-- Playlist Container (akan diisi secara dinamis) -->
                <div class="playlist-container" id="playlistHealthyRecept">
                  <!-- Playlist items akan diisi oleh JavaScript -->
                </div>
                
                <!-- Video Player untuk Healthy Recept -->
                <div class="video-container" id="videoContainerHealthyRecept">
                  <button class="close-video" onclick="closeVideo('healthyRecept')">
                    <i class="fas fa-times"></i>
                  </button>
                  <div class="video-wrapper">
                    <div class="video-placeholder" onclick="playVideo('healthyRecept')">
                      <i class="fas fa-play-circle"></i>
                      <div class="video-placeholder-text">Pilih video dari playlist</div>
                    </div>
                    <div class="video-loading" id="videoLoadingHealthyRecept">
                      <div class="spinner-border" role="status">
                        <span class="visually-hidden">Loading video...</span>
                      </div>
                    </div>
                    <div id="videoPlayerHealthyRecept"></div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- TAMPILAN DASHBOARD FIT TRACK -->
          <div class="menu-accordion-item">
            <button class="menu-header collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#dasboardFitTrack">
              <span>
                <i class="fas fa-angle-double-right me-2"></i>Dashboard Fit Track
                <i class="fas fa-lock status-lock"></i>
              </span>
              <i class="fas fa-angle-down menu-icon"></i>
            </button>
            <div class="collapse" id="dasboardFitTrack" data-bs-parent="#menuAccordion">
              <div class="menu-content">
                <a href="#" class="menu-item"><i class="fas fa-chart-line"></i>Fit Track1</a>
                <a href="#" class="menu-item"><i class="fas fa-heartbeat"></i>Fit Track2</a>
                <a href="#" class="menu-item"><i class="fas fa-dumbbell"></i>Fit Track3</a>
             </div>
            </div>
          </div>
        </div>

        <footer class="footer mt-3 text-white text-center p-2 rounded" style="background-color: #002266;">
          FIT Challenge Versi 1.0 Â© 2025 <a href="https://www.beratidealku.com" class="text-white">Power by: www.beratidealku.com</a>
        </footer>
      </div>
    </div>
  </div>
</div>

<!-- About Overlay -->
<div class="about-overlay" id="aboutOverlay">
  <div class="about-form">
    <h5 class="mb-2">Fat Loss Challenge Versi 1.0</h5>
    <br>Copyright Â© 2025 <a href="https://www.beratidealku.com" class="text-black">www.beratidealku.com</a>
    <br>Allright Reserved
    <br>Hanya digunakan untuk kalangan internal
    <div class="d-grid mt-4">
      <button id="btnCloseAbout" class="btn btn-primary">OK</button>
    </div>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.4.120/pdf.min.js"></script>
<script>
// *********************************************
// CONFIGURATION
// *********************************************
const PLAYLIST_JSON_URL = './data/playlist.json';

/******************
* Show About form 
*******************/
function showAbout() {
  document.getElementById('aboutOverlay').style.display = 'flex';
}

/******************
* Hide About form 
*******************/  
function hideAbout() {
  document.getElementById('aboutOverlay').style.display = 'none';
}

// ***********************
// ACCORDION TOGGLE FIX 
// ************************
document.addEventListener('DOMContentLoaded', function() {
    let currentOpenMenu = null;
    
    document.querySelectorAll('.menu-header').forEach(header => {
        // Remove Bootstrap's click handler completely
        header.setAttribute('data-bs-toggle', '');
        
        header.addEventListener('click', function(e) {
            e.preventDefault();
            e.stopPropagation();
            
            const targetId = this.getAttribute('data-bs-target');
            const targetContent = document.querySelector(targetId);
            
            if (!targetContent) return;
            
            console.log('ðŸ”„ Menu diklik:', targetId);
            console.log('Current open:', currentOpenMenu);
            
            // Jika klik menu yang sama yang sedang terbuka
            if (currentOpenMenu === targetId) {
                // TUTUP menu
                targetContent.style.display = 'none';
                targetContent.classList.remove('show');
                this.classList.add('collapsed');
                currentOpenMenu = null;
                console.log('âœ… Menu DITUTUP');
            } else {
                // BUKA menu baru
                // Tutup menu yang sebelumnya terbuka
                if (currentOpenMenu) {
                    const previousContent = document.querySelector(currentOpenMenu);
                    const previousHeader = document.querySelector(`[data-bs-target="${currentOpenMenu}"]`);
                    if (previousContent && previousHeader) {
                        previousContent.style.display = 'none';
                        previousContent.classList.remove('show');
                        previousHeader.classList.add('collapsed');
                    }
                }
                
                // Buka menu baru
                targetContent.style.display = 'block';
                targetContent.classList.add('show');
                this.classList.remove('collapsed');
                currentOpenMenu = targetId;
                console.log('âœ… Menu DIBUKA');
            }
        });
    });
});

/*************************************
* Cek status login saat halaman dimuat
**************************************/
document.addEventListener('DOMContentLoaded', function () {
    // About overlay
    document.getElementById('btnCloseAbout').addEventListener('click', hideAbout);
    
    // Cek login status
    const userToken = localStorage.getItem('userToken');
    if (userToken) {
        const loginMenuItem = document.getElementById('loginMenuItem');
        loginMenuItem.innerHTML = `
            <a class="nav-link main-menu-link" href="loginFC.html" onclick="logout()">
                <i class="fas fa-sign-out-alt"></i> Logout
            </a>
        `;
    }
    
    // Initialize video players
    initializeAllVideoPlayers();
    console.log('âœ… App initialized successfully');

});

/*****************
/ Logout function 
******************/
function logout() {
  localStorage.removeItem('userId');
  localStorage.removeItem('userToken');
  localStorage.removeItem('userLevel');
  sessionStorage.removeItem('aksesList');
  window.location.reload();
}

// ***************************
// VIDEO PLAYER CORE FUNCTIONS 
// ***************************
let currentVideoData = {};

/***********************************
* Fungsi Initialisasi Seluruh video
************************************/ 
function initializeAllVideoPlayers() {
    console.log('Initializing video players...');

    // Setup untuk panduan aplikasi
    setupVideoLinksForSection('panduan', [
        { selector: 'a[href*="canva.com"]', type: 'canva' },
        { selector: 'a[href*="youtube.com"]', type: 'youtube' },
        { selector: 'a[href*=".mp4"]', type: 'local' }
    ]);
    // Setup untuk perkenalan
    setupVideoLinksForSection('perkenalan', [
        { selector: 'a[href*="canva.com"]', type: 'canva' },
        { selector: 'a[href*="youtube.com"]', type: 'youtube' },
        { selector: 'a[href*=".mp4"]', type: 'local' }
    ]);
    
    // Setup untuk pertemuan 1 - 10
    for (let i = 1; i <= 10; i++) {
        setupVideoLinksForSection(`pertemuan${i}`, [
            { selector: 'a[href*="canva.com"]', type: 'canva' },
            { selector: 'a[href*="youtube.com"]', type: 'youtube' },
            { selector: 'a[href*=".mp4"]', type: 'local' }
        ]);
    }

    // Setup PDF links untuk panduan aplikasi
    setupPDFLinksForSection('panduan', [
        { selector: 'a[href*="Panduan_Meal_Plan.pdf"]' },
        { selector: 'a[href*="Panduan_Workout.pdf"]' },
        { selector: 'a[href*="Panduan_Water_Reminder.pdf"]' },
        { selector: 'a[href*="Panduan_Waktu_Istirahat.pdf"]' },
        { selector: 'a[href*="Panduan_Progress_Tracking.pdf"]' }
    ]);
    
    // Setup PDF links untuk meal plan
    setupPDFLinksForSection('mealPlan', [
        { selector: 'a[href*="Meal_Plan_HariKe1.pdf"]' },
        { selector: 'a[href*="Meal_Plan_HariKe2.pdf"]' },
        { selector: 'a[href*="Meal_Plan_HariKe3.pdf"]' },
        { selector: 'a[href*="Meal_Plan_HariKe4.pdf"]' },
        { selector: 'a[href*="Meal_Plan_HariKe5.pdf"]' }
    ]);

    // Setup untuk healthyRecept dengan JSON data
    const healthyReceptLink = document.querySelector('a[href*="youtube.com/playlist"]');
    if (healthyReceptLink) {
        console.log('âœ… Setup: Found healthyRecept playlist link');
        healthyReceptLink.onclick = function(e) {
            e.preventDefault();
            showPlaylist('healthyRecept', this.getAttribute('href'));
        };
    }
    
    // Setup video placeholder click events
    document.querySelectorAll('.video-placeholder').forEach(placeholder => {
        const section = placeholder.closest('.video-container').id.replace('videoContainer', '');
        placeholder.addEventListener('click', function() {
            playVideo(section);
        });
    });
    
    // Close video dengan ESC key
    document.addEventListener('keydown', function(e) {
        if (e.key === 'Escape' && currentVideoData.section) {
            closeVideo(currentVideoData.section);
        }
    });
    // Debug: log untuk memastikan script loaded
    console.log('Video player script loaded successfully');
}

/**************************
* Fungsi Setup Link Video 
***************************/ 
function setupVideoLinksForSection(section, linkConfigs) {
    const menuContent = document.getElementById(section + 'Content');
    if (!menuContent) return;
    
    linkConfigs.forEach(config => {
        const link = menuContent.querySelector(config.selector);
        if (link) {
            link.onclick = function(e) {
                e.preventDefault();
                const videoUrl = this.getAttribute('href');
                const title = this.textContent.trim();
                loadVideo(section, config.type, videoUrl, title);
            };
        }
    });
}

/***********************
* Fungsi Setup Link PDF 
************************/ 
function setupPDFLinksForSection(section, linkConfigs) {
    const menuContent = document.getElementById(section + 'Content');
    if (!menuContent) return;
    
    linkConfigs.forEach(config => {
        const link = menuContent.querySelector(config.selector);
        if (link) {
            link.onclick = function(e) {
                e.preventDefault();
                const pdfUrl = this.getAttribute('href');
                const title = this.textContent.trim();
                loadPDF(section, pdfUrl, title);
            };
        }
    });
}

/********************
* Fungsi Load Video
*********************/ 
function loadVideo(section, videoType, videoUrl, title = '') {
    console.log('loadVideo called:', { section, videoType, videoUrl, title });
    
    // Untuk Canva, buka di tab baru
    if (videoType === 'canva') {
        window.open(videoUrl, '_blank');
        return;
    }
    
    const videoContainer = document.getElementById(`videoContainer${capitalizeFirst(section)}`);
    if (!videoContainer) return;
    
    const videoPlaceholder = videoContainer.querySelector('.video-placeholder');
    const videoLoading = document.getElementById(`videoLoading${capitalizeFirst(section)}`);
    const videoPlayer = document.getElementById(`videoPlayer${capitalizeFirst(section)}`);
    
    // Close video di section lain
    closeAllVideos();
    
    // Reset previous video 
    if (videoPlayer) videoPlayer.innerHTML = '';
    currentVideoData = {
        section: section,
        type: videoType,
        url: videoUrl,
        title: title
    };
    
    // Show video container
    videoContainer.style.display = 'block';
    
    // Update placeholder text
    let placeholderText = 'Klik untuk memuat video';
    if (videoType === 'youtube') {
        placeholderText = 'Klik untuk memuat video dari YouTube';
    } else if (videoType === 'local') {
        placeholderText = 'Klik untuk memuat video lokal';
    }
    
    if (videoPlaceholder) {
        videoPlaceholder.querySelector('.video-placeholder-text').textContent = placeholderText;
        videoPlaceholder.style.display = 'flex';
    }
    if (videoLoading) videoLoading.style.display = 'none';
    
    // Auto play setelah ditampilkan
    setTimeout(() => {
        playVideo(section);
    }, 500);
}

/********************
* Fungsi Play Video 
*********************/
function playVideo(section) {
    console.log('playVideo called for section:', section);
    
    const videoContainer   = document.getElementById(`videoContainer${capitalizeFirst(section)}`);
    const videoPlaceholder = videoContainer?.querySelector('.video-placeholder');
    const videoLoading     = document.getElementById(`videoLoading${capitalizeFirst(section)}`);
    const videoPlayer      = document.getElementById(`videoPlayer${capitalizeFirst(section)}`);
    
    if (!videoContainer || !videoPlayer) {
        console.error('Video elements not found for section:', section);
        return;
    }
    
    // Hide placeholder, show loading
    if (videoPlaceholder) videoPlaceholder.style.display = 'none';
    if (videoLoading) videoLoading.style.display = 'flex';
    
    // Load video based on type
    setTimeout(() => {
        if (videoLoading) videoLoading.style.display = 'none';
        
        if (currentVideoData.type === 'youtube') {
            console.log('Loading YouTube video:', currentVideoData.url);
            loadYouTubeVideo(videoPlayer, currentVideoData.url);
        } else if (currentVideoData.type === 'local') {
            console.log('Loading local video:', currentVideoData.url);
            loadLocalVideo(videoPlayer, currentVideoData.url);
        }
    }, 1000);
}

/***************************
* Fungsi Load Video Youtube 
****************************/
function loadYouTubeVideo(videoPlayer, url) {
    const videoId = extractYouTubeId(url);
    console.log('YouTube ID extracted:', videoId);
    
    if (videoId) {
        videoPlayer.innerHTML = `
            <iframe src="https://www.youtube.com/embed/${videoId}?autoplay=1" 
                    frameborder="0" 
                    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
                    allowfullscreen>
            </iframe>
        `;
        console.log('YouTube iframe created');
    } else {
        console.error('Could not extract YouTube ID from URL:', url);
        // Fallback: buka di tab baru
        window.open(url, '_blank');
        if (currentVideoData.section) {
            closeVideo(currentVideoData.section);
        }
    }
}

/*************************
* Fungsi Load Local Video 
**************************/
function loadLocalVideo(videoPlayer, url) {
    console.log('Creating local video element for:', url);
    videoPlayer.innerHTML = `
        <video controls autoplay style="width:100%; height:100%">
            <source src="${url}" type="video/mp4">
            Browser Anda tidak mendukung pemutaran video.
        </video>
    `;
    
    // Handle error loading local video
    const videoElement = videoPlayer.querySelector('video');
    if (videoElement) {
        videoElement.onerror = function() {
            console.error('Error loading local video:', url);
            alert('Video tidak dapat dimuat. Pastikan file video ada di folder yang benar.');
            if (currentVideoData.section) {
                closeVideo(currentVideoData.section);
            }
        };
    }
}

/***************************
* Fungsi Extract ID Youtube 
****************************/
function extractYouTubeId(url) {
    console.log('Extracting YouTube ID from:', url);
    
    // Support multiple YouTube URL formats
    const patterns = [
        /(?:youtube\.com\/watch\?v=|youtu\.be\/|youtube\.com\/embed\/)([^&?#]+)/,
        /youtube\.com\/watch\?.*v=([^&?#]+)/,
        /youtu\.be\/([^&?#]+)/
    ];
    
    for (const pattern of patterns) {
        const match = url.match(pattern);
        if (match && match[1]) {
            console.log('YouTube ID found:', match[1]);
            return match[1];
        }
    }
    
    console.log('No YouTube ID found');
    return null;
}

/*********************
* Fungsi Close Video 
**********************/
function closeVideo(section) {
    console.log('Closing video for section:', section);
    
    const videoContainer = document.getElementById(`videoContainer${capitalizeFirst(section)}`);
    if (!videoContainer) return;
    
    const videoPlayer = document.getElementById(`videoPlayer${capitalizeFirst(section)}`);
    const videoPlaceholder = videoContainer.querySelector('.video-placeholder');
    const videoLoading = document.getElementById(`videoLoading${capitalizeFirst(section)}`);
    
    // Stop video playback
    const iframe = videoPlayer.querySelector('iframe');
    const localVideo = videoPlayer.querySelector('video');
    
    if (iframe) iframe.src = '';
    if (localVideo) {
        localVideo.pause();
        localVideo.currentTime = 0;
    }
    
    videoPlayer.innerHTML = '';
    videoContainer.style.display = 'none';
    if (videoPlaceholder) videoPlaceholder.style.display = 'flex';
    if (videoLoading) videoLoading.style.display = 'none';
    
    currentVideoData = {};
}

/**************************
* Fungsi Close All Video 
***************************/
function closeAllVideos() {
    console.log('Closing all videos');
    const videoContainers = document.querySelectorAll('.video-container');
    videoContainers.forEach(container => {
        const section = container.id.replace('videoContainer', '');
        if (section) {
            closeVideo(section);
        }
    });
    // Close all PDFs
    closeAllPDFs();
}

/***********************************
* Load playlist data dari JSON file
************************************/
async function loadPlaylistData() {
    try {
        console.log('ðŸ“¥ Loading playlist data from JSON...');
        const response = await fetch(PLAYLIST_JSON_URL);
        
        if (!response.ok) {
            throw new Error(`HTTP error! status: ${response.status}`);
        }
        
        const data = await response.json();
        console.log(`âœ… Loaded ${data.length} videos from JSON`);
        return data;
        
    } catch (error) {
        console.error('âŒ Error loading playlist data:', error);
        // Fallback ke proven videos
        return getProvenVideos();
    }
}

/********************************
* Proven videos sebagai fallback
*********************************/
function getProvenVideos() {
    return [
        {
            id: '1',
            videoId: '9DoHhx9jlGM',
            title: 'Alasan Mengapa Herbalife - Penjelasan Lengkap',
            thumbnail: 'https://i.ytimg.com/vi/9DoHhx9jlGM/mqdefault.jpg',
            duration: '15:30',
            position: 1
        },
        {
            id: '2', 
            videoId: 'Zg_badTE2Ec',
            title: 'Dari Mana Saja Sumber Protein Bisa Didapatkan?',
            thumbnail: 'https://i.ytimg.com/vi/Zg_badTE2Ec/mqdefault.jpg',
            duration: '12:45',
            position: 2
        }
    ];
}

/******************************
* Show playlist dari JSON data
*******************************/
async function showPlaylist(section, playlistUrl) {
    const playlistContainer = document.getElementById(`playlist${capitalizeFirst(section)}`);
    if (!playlistContainer) {
        console.error('Playlist container not found');
        return;
    }
    
    // Tampilkan loading
    playlistContainer.innerHTML = `
        <div class="playlist-loading">
            <div class="spinner-border spinner-border-sm" role="status"></div>
            <div class="mt-2">Memuat daftar video...</div>
        </div>
    `;
    playlistContainer.style.display = 'block';
    
    try {
        const playlistItems = await loadPlaylistData();
        
        if (!playlistItems || playlistItems.length === 0) {
            throw new Error('Tidak ada data video');
        }
        
        renderPlaylist(playlistContainer, playlistItems, section);
        
    } catch (error) {
        console.error('Error showing playlist:', error);
        // Fallback ke proven videos
        const provenVideos = getProvenVideos();
        renderPlaylist(playlistContainer, provenVideos, section);
        showToast('âš ï¸ Menggunakan data lokal', 'info');
    }
}

/***********************
* Render playlist items
************************/
function renderPlaylist(container, items, section) {
    container.innerHTML = '';
    
    // Header
    const header = document.createElement('div');
    header.className = 'playlist-header';
    header.style.padding = '12px 15px';
    header.style.borderBottom = '1px solid #dee2e6';
    header.style.background = '#f8f9fa';
    header.style.fontWeight = '600';
    header.innerHTML = `
        <div>
            <i class="fas fa-list-ul me-2"></i>Playlist Healthy Snacking
            <div style="font-size: 12px; color: #666; font-weight: normal; margin-top: 2px;">
                ${items.length} video tersedia
            </div>
        </div>
    `;
    container.appendChild(header);
    
    // Render playlist items
    items.forEach((item, index) => {
        const playlistItem = document.createElement('div');
        playlistItem.className = 'playlist-item';
        playlistItem.style.cursor = 'pointer';
        playlistItem.innerHTML = `
            <div class="playlist-thumbnail">
                <img src="${item.thumbnail}" alt="${item.title}" 
                     loading="lazy"
                     onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTIwIiBoZWlnaHQ9IjY4IiB2aWV3Qm94PSIwIDAgMTIwIDY4IiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxyZWN0IHdpZHRoPSIxMjAiIGhlaWdodD0iNjgiIGZpbGw9IiNlZGVkZWQiLz48dGV4dCB4PSI2MCIgeT0iMzQiIGZvbnQtZmFtaWx5PSJBcmlhbCwgc2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMCIgZmlsbD0iIzk5OTk5OSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZG9taW5hbnQtYmFzZWxpbmU9Im1pZGRsZSI+VGh1bWJuYWlsPC90ZXh0Pjwvc3ZnPg=='">
                <div class="position-badge">${index + 1}</div>
            </div>
            <div class="playlist-info">
                <div class="playlist-title">${item.title}</div>
                <div class="playlist-meta">
                    ${item.duration ? `<span class="playlist-duration"><i class="fas fa-clock me-1"></i>${item.duration}</span>` : ''}
                    <span class="playlist-position">Video ${index + 1}</span>
                </div>
            </div>
        `;
        
        playlistItem.onclick = function() {
            playVideoFromPlaylist(section, item.videoId, item.title);
        };
        
        container.appendChild(playlistItem);
    });
    
    // Footer
    const footer = document.createElement('div');
    footer.className = 'playlist-footer';
    footer.style.padding = '10px 15px';
    footer.style.borderTop = '1px solid #dee2e6';
    footer.style.fontSize = '12px';
    footer.style.color = '#666';
    footer.style.textAlign = 'center';
    footer.style.background = '#f8f9fa';
    footer.innerHTML = `
        <div><i class="fas fa-database me-1"></i>Data update â€¢ ${new Date().toLocaleDateString('id-ID')}</div>
    `;
    container.appendChild(footer);
}

/**************************
* Play video dari playlist
***************************/
function playVideoFromPlaylist(section, videoId, title) {
    console.log('ðŸŽ¬ Playing video from playlist:', { section, videoId, title });
    
    const videoContainer = document.getElementById(`videoContainer${capitalizeFirst(section)}`);
    if (!videoContainer) {
        console.error('Video container not found for section:', section);
        return;
    }
    
    // Sembunyikan playlist
    const playlistContainer = document.getElementById(`playlist${capitalizeFirst(section)}`);
    if (playlistContainer) {
        playlistContainer.style.display = 'none';
    }
    
    // Show video container
    videoContainer.style.display = 'block';
    
    // Set current video data
    currentVideoData = {
        section: section,
        type: 'youtube',
        url: `https://www.youtube.com/watch?v=${videoId}`,
        title: title
    };
    
    // Auto play video setelah delay
    setTimeout(() => {
        playVideo(section);
    }, 500);
    
    // Scroll ke video player
    setTimeout(() => {
        videoContainer.scrollIntoView({ behavior: 'smooth', block: 'center' });
    }, 600);
}

// ====================
// UTILITY FUNCTIONS
// ====================

/*******************************
* Fungsi Untuk Huruf Awal Besar
********************************/ 
function capitalizeFirst(string) {
    return string.charAt(0).toUpperCase() + string.slice(1);
}

/*****************************
* Fungsi extrack ID Playlist
******************************/ 
function extractPlaylistId(url) {
    const match = url.match(/[&?]list=([^&]+)/);
    return match ? match[1] : null;
}

/*************************
* Fungsi tampilkan pesan
**************************/ 
function showToast(message, type = 'info') {
    const toast = document.createElement('div');
    toast.style.cssText = `
        position: fixed;
        top: 80px;
        right: 20px;
        background: ${type === 'success' ? '#28a745' : type === 'error' ? '#dc3545' : '#17a2b8'};
        color: white;
        padding: 12px 20px;
        border-radius: 6px;
        z-index: 10000;
        box-shadow: 0 4px 12px rgba(0,0,0,0.3);
        font-size: 14px;
        max-width: 300px;
    `;
    toast.textContent = message;
    document.body.appendChild(toast);
    setTimeout(() => {
        toast.style.opacity = '0';
        toast.style.transition = 'opacity 0.5s';
        setTimeout(() => toast.remove(), 500);
    }, 3000);
}

// **********************
// PDF VIEWER FUNCTIONS 
// **********************
let currentPDFData = {};

/********************
* Fungsi Load PDF
*********************/ 
function loadPDF(section, pdfUrl, title = '') {
    console.log('loadPDF called:', { section, pdfUrl, title });
    
    const pdfViewer = document.getElementById(`pdfViewer${capitalizeFirst(section)}`);
    const pdfContainer = document.getElementById(`pdfContainer${capitalizeFirst(section)}`);
    const pdfTitle = document.getElementById(`pdfTitle${capitalizeFirst(section)}`);
    
    if (!pdfViewer || !pdfContainer) return;
    
    // Close video dan PDF lain
    closeAllVideos();
    closeAllPDFs();
    
    // Reset previous PDF
    pdfContainer.innerHTML = '';
    currentPDFData = {
        section: section,
        url: pdfUrl,
        title: title
    };
    
    // Update title
    if (pdfTitle) {
        pdfTitle.textContent = title;
    }
    
    // Show loading
    pdfContainer.innerHTML = `
        <div class="pdf-loading">
            <div class="spinner-border spinner-border-sm" role="status"></div>
            <div class="mt-2">Memuat PDF, tunggu...</div>
        </div>
    `;
    
    // Show PDF viewer
    pdfViewer.style.display = 'block';
    
    // Load PDF setelah ditampilkan
    setTimeout(() => {
        displayPDF(section, pdfUrl, title);
    }, 500);
}

/********************
* Fungsi Display PDF 
*********************/
function displayPDF(section, pdfUrl, title) {
    console.log('Displaying PDF with PDF.js:', pdfUrl);
    
    const pdfContainer = document.getElementById(`pdfContainer${capitalizeFirst(section)}`);
    const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
    
    if (!pdfContainer) return;
    
    // Clear previous content
    pdfContainer.innerHTML = '';
    
    if (isMobile && window.innerWidth < 768) {
        // Untuk mobile, berikan opsi yang lebih user-friendly
        showMobilePDFOptions(section, pdfUrl, title);
    } else {
        // Untuk desktop dan tablet, gunakan PDF.js
        displayPDFWithPDFJS(section, pdfUrl, title);
    }
}

/*********************************
* Fungsi Display PDF dengan PDF.js
**********************************/
function displayPDFWithPDFJS(section, pdfUrl, title) {
    const pdfContainer = document.getElementById(`pdfContainer${capitalizeFirst(section)}`);
    
    // Show loading
    pdfContainer.innerHTML = `
        <div class="pdf-loading">
            <div class="spinner-border spinner-border-sm" role="status"></div>
            <div class="mt-2">Memuat PDF, tunggu...</div>
        </div>
    `;
    
    // Set up PDF.js
    pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.4.120/pdf.worker.min.js';
    
    let pdfDoc = null;
    let pageNum = 1;
    let pageRendering = false;
    let pageNumPending = null;
    const scale = 1.5;
    
    function renderPage(num) {
        pageRendering = true;
        
        pdfDoc.getPage(num).then(function(page) {
            const viewport = page.getViewport({ scale: scale });
            const canvas = document.createElement('canvas');
            const ctx = canvas.getContext('2d');
            canvas.height = viewport.height;
            canvas.width = viewport.width;
            
            canvas.className = 'pdfjs-canvas';
            
            const renderContext = {
                canvasContext: ctx,
                viewport: viewport
            };
            
            const renderTask = page.render(renderContext);
            
            renderTask.promise.then(function() {
                pageRendering = false;
                
                if (pageNumPending !== null) {
                    renderPage(pageNumPending);
                    pageNumPending = null;
                }
            });
            
            // Clear container and add canvas
            const viewer = document.getElementById(`pdfjsViewer${capitalizeFirst(section)}`);
            viewer.innerHTML = '';
            viewer.appendChild(canvas);
            
            // Update page info
            document.getElementById(`pdfjsPageInfo${capitalizeFirst(section)}`).textContent = 
                `Halaman ${num} dari ${pdfDoc.numPages}`;
                
        }).catch(function(error) {
            console.error('Error rendering page:', error);
            handlePDFError(section);
        });
    }
    
    function queueRenderPage(num) {
        if (pageRendering) {
            pageNumPending = num;
        } else {
            renderPage(num);
        }
    }
    
    function onPrevPage() {
        if (pageNum <= 1) return;
        pageNum--;
        queueRenderPage(pageNum);
    }
    
    function onNextPage() {
        if (pageNum >= pdfDoc.numPages) return;
        pageNum++;
        queueRenderPage(pageNum);
    }
    
    // Load the PDF
    pdfjsLib.getDocument(pdfUrl).promise.then(function(pdfDoc_) {
        pdfDoc = pdfDoc_;
        
        // Update container with PDF.js viewer
        pdfContainer.innerHTML = `
            <div class="pdfjs-controls">
                <button class="btn btn-sm btn-outline-primary" onclick="onPrevPage${capitalizeFirst(section)}()">
                    <i class="fas fa-chevron-left"></i> Sebelumnya
                </button>
                <span class="pdfjs-page-info" id="pdfjsPageInfo${capitalizeFirst(section)}">
                    Halaman 1 dari ${pdfDoc.numPages}
                </span>
                <button class="btn btn-sm btn-outline-primary" onclick="onNextPage${capitalizeFirst(section)}()">
                    Berikutnya <i class="fas fa-chevron-right"></i>
                </button>
            </div>
            <div class="pdfjs-viewer" id="pdfjsViewer${capitalizeFirst(section)}"></div>
        `;
        
        // Render first page
        renderPage(1);
        
        // Store functions globally for button access
        window[`onPrevPage${capitalizeFirst(section)}`] = onPrevPage;
        window[`onNextPage${capitalizeFirst(section)}`] = onNextPage;
        
    }).catch(function(error) {
        console.error('Error loading PDF with PDF.js:', error);
        // Fallback ke metode sebelumnya
        fallbackToIframe(section, pdfUrl);
    });
}

/********************
* Fungsi Opsi Mobile 
*********************/
function showMobilePDFOptions(section, pdfUrl, title) {
    const pdfContainer = document.getElementById(`pdfContainer${capitalizeFirst(section)}`);
    
    pdfContainer.innerHTML = `
        <div style="padding: 20px; text-align: center;">
            <div class="mb-4">
                <i class="fas fa-file-pdf fa-3x text-danger mb-3"></i>
                <h5>${title}</h5>
                <p class="text-muted">Pilih cara untuk melihat PDF:</p>
            </div>
            
            <div class="d-grid gap-2">
                <button class="btn btn-primary btn-lg" onclick="displayPDFWithPDFJS('${section}', '${pdfUrl}', '${title}')">
                    <i class="fas fa-eye me-2"></i>Lihat di Aplikasi (PDF.js)
                </button>
                
                <button class="btn btn-outline-primary btn-lg" onclick="openPDFInNewTab('${section}')">
                    <i class="fas fa-external-link-alt me-2"></i>Buka di Browser
                </button>
            </div>
            
            <div class="mt-4 p-3 bg-light rounded">
                <small class="text-muted">
                    <i class="fas fa-info-circle me-1"></i>
                    <strong>File PDF</strong> mungkin membutuhkan waktu lebih lama untuk memuat, 
                    tetapi dapat menampilkan PDF langsung di aplikasi.
                </small>
            </div>
        </div>
    `;
}

/***************************
* Fungsi Fallback ke Iframe
****************************/
function fallbackToIframe(section, pdfUrl) {
    const pdfContainer = document.getElementById(`pdfContainer${capitalizeFirst(section)}`);
    
    pdfContainer.innerHTML = `
        <div class="pdf-mobile-warning">
            <i class="fas fa-info-circle me-2"></i>
            Menggunakan metode alternatif untuk menampilkan PDF
        </div>
        <iframe 
            src="${pdfUrl}#toolbar=0&navpanes=0&scrollbar=1" 
            width="100%" 
            height="500" 
            style="border: none;"
            onload="console.log('PDF iframe fallback loaded')"
            onerror="handlePDFError('${section}')"
        >
        </iframe>
        <div class="text-center mt-3">
            <button class="btn btn-primary me-2" onclick="downloadPDF('${section}')">
                <i class="fas fa-download me-1"></i>Download PDF
            </button>
            <button class="btn btn-secondary" onclick="openPDFInNewTab('${section}')">
                <i class="fas fa-external-link-alt me-1"></i>Buka di Tab Baru
            </button>
        </div>
    `;
}

/*******************************
* Fungsi Fallback untuk Mobile
********************************/
function fallbackPDFMobile(section, pdfUrl) {
    const pdfContainer = document.getElementById(`pdfContainer${capitalizeFirst(section)}`);
    
    pdfContainer.innerHTML = `
        <div class="pdf-error">
            <i class="fas fa-exclamation-triangle fa-2x mb-3"></i>
            <div>Tidak dapat menampilkan PDF di perangkat ini</div>
            <div class="mt-3">
                <button class="btn btn-primary me-2" onclick="downloadPDF('${section}')">
                    <i class="fas fa-download me-1"></i>Download PDF
                </button>
                <button class="btn btn-secondary" onclick="openPDFInNewTab('${section}')">
                    <i class="fas fa-external-link-alt me-1"></i>Buka di Tab Baru
                </button>
            </div>
        </div>
    `;
}

/****************************
* Fungsi Open PDF in New Tab
****************************/
function openPDFInNewTab(section) {
    if (currentPDFData.url) {
        window.open(currentPDFData.url, '_blank');
    }
}

/**************************
* Fungsi Handle PDF Error
***************************/
function handlePDFError(section) {
    console.error('Error loading PDF for section:', section);
    
    const pdfContainer = document.getElementById(`pdfContainer${capitalizeFirst(section)}`);
    if (pdfContainer) {
        pdfContainer.innerHTML = `
            <div class="pdf-error">
                <i class="fas fa-exclamation-triangle fa-2x mb-3"></i>
                <div>Gagal memuat PDF</div>
                <div class="mt-3">
                    <button class="btn btn-primary me-2" onclick="downloadPDF('${section}')">
                        <i class="fas fa-download me-1"></i>Download PDF
                    </button>
                    <button class="btn btn-secondary me-2" onclick="openPDFInNewTab('${section}')">
                        <i class="fas fa-external-link-alt me-1"></i>Buka di Tab Baru
                    </button>
                    <button class="btn btn-outline-secondary" onclick="closePDF('${section}')">
                        Tutup
                    </button>
                </div>
            </div>
        `;
    }
}

/*******************
* Fungsi Close PDF
********************/
function closePDF(section) {
    console.log('Closing PDF for section:', section);
    
    const pdfViewer = document.getElementById(`pdfViewer${capitalizeFirst(section)}`);
    const pdfContainer = document.getElementById(`pdfContainer${capitalizeFirst(section)}`);
    
    if (!pdfViewer || !pdfContainer) return;
    
    // Clear PDF content
    pdfContainer.innerHTML = '';
    pdfViewer.style.display = 'none';
    
    currentPDFData = {};
}

/************************
* Fungsi Close All PDFs
*************************/
function closeAllPDFs() {
    console.log('Closing all PDFs');
    const pdfViewers = document.querySelectorAll('.pdf-viewer');
    pdfViewers.forEach(viewer => {
        const section = viewer.id.replace('pdfViewer', '');
        if (section) {
            closePDF(section.toLowerCase());
        }
    });
}

</script>
</body>
</html>